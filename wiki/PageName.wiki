#sidebar TableOfContents

= Editor Installation =

== Notes: ==

  * Let H is a host name, where we want to deploy the editor
  * Installation process is primarilly designed for a Debian-like linux, but it was tested for example on RedHat distribution after few editations as well.

Add a new user called "meditor" on H computer:
{{{sudo adduser meditor}}}

== Packages: ==

Add packages:

{{{sudo aptitude (apt-get) install mc vim aptitude acpi ssh rar sshfs wget curl openntpd ntpdate libtiff-tools imagemagick unzip htop}}}

== Database: ==

If the DB is not present, install Postgres
{{{
sudo su postgres && psql 
}}}
and run following commands:
{{{
CREATE ROLE meditor WITH PASSWORD 'samePassAsUnixPassForMeditor' LOGIN;
CREATE SCHEMA AUTHORIZATION meditor;
CREATE DATABASE meditor WITH OWNER meditor;
}}}
    * add (or ensure about their presence) the following lines to the configuration file of the postgres (_/etc/postgresql/${version}/main/pg_hba.conf_), for joining via http for user and database called "meditor"
{{{
#localhost
host	all 	meditor 	127.0.0.1/32		password
# MZK
host	all 	meditor 	195.113.155.0/24   	password
}}}
   * in file _/etc/postgresql/${version}/main/postgresql.conf_ uncomment the line "listen_addresses" and as a value set the strings "localhost" and ip address of H computer, separated by comma

   * restart postgres 
{{{
/etc/init.d/postgresql-${version} restart
}}}

== Install Tomcat: ==

{{{
wget http://websiterra.com/friends/apache/tomcat/tomcat-7/v7.0.25/bin/apache-tomcat-7.0.25.zip #(or newer)
unzip apache-tomcat-7.0.25.zip
}}}
   * Into
{{{
$CATALINA_HOME/bin/catalina.sh
}}} 
 ...add a line:
{{{
CATALINA_PID="$CATALINA_HOME/tomcat.pid"
}}} 
 place it after the command, which set a variable {{{CATALINA_HOME}}} in case it was not set yet (in version 7 Tomcat it is situated about line 100)

    * Into directory
{{{
CATALINA_HOME/lib/
}}} 
 copy the JDBC driver for Postgres (for example postgresql-${version}.jdbc4.jar)

== Environment Variable: ==

Into 
{{{
/home/meditor/.bashrc
}}} 
add the following lines (+/-):
{{{
export HISTSIZE=10000
export HISTFILESIZE=10000
export HISTCONTROL=ignoreboth
export JAVA_HOME='/home/meditor/install/jdk1.6.0_21/'
export CATALINA_HOME='/home/meditor/apache-tomcat-7.0.25/'
export CATALINA_OPTS='-server -Xmx512m -XX:MaxPermSize=128m -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n'
export PATH=$JAVA_HOME/bin:$PATH
export LC_ALL=cs_CZ.utf8
export PGCLIENTENCODING=UNICODE
}}}

== Image server: ==

   * create 
{{{
H:/home/meditor/.meditor
}}}